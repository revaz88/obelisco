{% extends "install/install.html.twig" %}

{% block content %}
    <div id="step_3">
        <div class="alert alert-info">
            {% trans %}<strong>Atención:</strong> La base de datos especificada debe existir.{% endtrans %}
        </div>
        <form role="form" onsubmit="return false">
            <fieldset>
                <legend>{% trans %}Base de Datos{% endtrans %}</legend>
                <div id="db_test_success" class="alert alert-success" style="display: none">
                </div>
                <div id="db_test_error" class="alert alert-danger" style="display: none">
                </div>
                <div class="form-group">
                    <label>Tipo:</label>
                    <abbr class="db-type" title="{% trans %}Seleccionado en el paso 1{% endtrans %}">{{ rdmsName }}</abbr>
                </div>
                <div class="form-group">
                    <label for="host">Host:</label>
                    <input type="text" id="host" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="port">{% trans %}Puerto{% endtrans %}:</label>
                    <input type="text" id="port" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="user">{% trans %}Usuario {% endtrans %}:</label>
                    <input type="text" id="user" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="password">{% trans %}Contraseña{% endtrans %}:</label>
                    <input type="password" id="password" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="dbname">Base de datos:</label>
                    <input type="text" id="dbname" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="form-group">
                    <label for="dbname">Charset:</label>
                    <input type="text" id="charset" class="form-control" onchange="SGA.Install.onChangeData()" />
                </div>
                <div class="alert alert-block">
                    {% trans %}Es necesario probar la base de datos antes de proseguir.{% endtrans %}
                    <button id="btn_test_db" class="btn btn-default" onclick="SGA.Install.testDB()"
                            title="{% trans %}Clic para controlar la conexión con la Base de Datos.{% endtrans %}">{% trans %}Probar{% endtrans %}</button>
                </div>
            </fieldset>
        </form>
        <script type="text/javascript">
            {% for field, message in data.database %}
            SGA.Install.dbData.{{ field }} = "{{ data.database[field] }}";
            {% endfor %}
            SGA.Install.loadDatabaseData();
        </script>
    </div>
{% endblock %}